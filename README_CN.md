# Live Marker

è·¨å¹³å°æ¡Œé¢åº”ç”¨ï¼Œç”¨äºç›´æ’­ã€ä¼šè®®æˆ–ä»»ä½•è®¡æ—¶åœºæ™¯ä¸­çš„å®æ—¶äº‹ä»¶æ ‡è®°ã€‚åŸºäº [Avalonia UI](https://avaloniaui.net/) å’Œ .NET 9 æ„å»ºã€‚

**ä½œè€…ï¼š** å¤œæ›´ã‘ã®ã‚·ãƒ³ãƒ•ã‚©ãƒ‹ãƒ¼ ([yosymph.com](https://yosymph.com))  
**è®¸å¯è¯ï¼š** GPLv3

**[English](README.md)**

---

## åŠŸèƒ½ç‰¹æ€§

- â± **å®é™…æ—¶é—´ä¸ç›´æ’­æ—¶é—´æ ‡è®°** â€”â€” ä½¿ç”¨å®é™…æ—¶é’Ÿæ—¶é—´æˆ–ä»å¯é…ç½®èµ·å§‹ç‚¹ç®—èµ·çš„ç»è¿‡æ—¶é—´è®°å½•æ ‡è®°ã€‚
- ğŸ¨ **é¢œè‰²æ ‡è®°** â€”â€” 7 ç§å†…ç½®é¢œè‰²ï¼ˆçº¢ã€æ©™ã€é»„ã€ç»¿ã€è“ã€ç´«ã€ç°ï¼‰ï¼Œæ”¯æŒå¿«æ·é”®å¿«é€Ÿé€‰æ‹©ã€‚
- âŒ¨ï¸ **æ™ºèƒ½æ—¶é—´è¾“å…¥** â€”â€” åœ¨æ¶ˆæ¯å¼€å¤´è¾“å…¥æ—¶é—´ï¼ˆå¦‚ `1:23:45`ã€`1.23.45`ã€`1ï¼š23ï¼š45`ã€`1-23-45`ï¼‰ï¼Œå°†è‡ªåŠ¨è¯†åˆ«ä¸ºç›´æ’­æ—¶é—´ã€‚
- ğŸ’¾ **è‡ªåŠ¨ä¿å­˜** â€”â€” æ‰“å¼€æ–‡ä»¶åè‡ªåŠ¨ä¿å­˜ï¼ˆå¯åœ¨è®¾ç½®ä¸­é…ç½®ï¼‰ã€‚
- â†©ï¸ **æ’¤é”€ / é‡åš** â€”â€” å®Œæ•´æ”¯æŒæ·»åŠ ã€åˆ é™¤ã€ç¼–è¾‘æ“ä½œçš„æ’¤é”€ä¸é‡åšã€‚
- ğŸ“¤ **å¯¼å‡º** â€”â€” å¯¼å‡ºæ ‡è®°ä¸ºçº¯æ–‡æœ¬ï¼ˆ`.txt`ï¼‰æˆ–å¸¦é¢œè‰²é«˜äº®çš„ Excelï¼ˆ`.xlsx`ï¼‰ã€‚
- ğŸ–¥ **è·¨å¹³å°** â€”â€” æ”¯æŒ Windowsï¼ˆx64/ARM64ï¼‰ã€Linuxï¼ˆx64ï¼‰å’Œ macOSï¼ˆARM64ï¼‰ã€‚

---

## ä½¿ç”¨è¯´æ˜

### å¿«é€Ÿå¼€å§‹

1. ä» Releases é¡µé¢ä¸‹è½½å¯¹åº”å¹³å°çš„ç‰ˆæœ¬ã€‚
2. è¿è¡Œ `LiveMarker`ï¼ˆWindows ä¸Šä¸º `LiveMarker.exe`ï¼‰ã€‚
3. åº”ç”¨å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨å°†å½“å‰æ—¶é—´è®¾ä¸ºèµ·å§‹æ—¶é—´ã€‚

### æ·»åŠ æ ‡è®°

1. åœ¨åº•éƒ¨è¾“å…¥æ¡†ä¸­è¾“å…¥æ¶ˆæ¯å†…å®¹ã€‚
2. æŒ‰ <kbd>Enter</kbd> æ·»åŠ æ ‡è®°ã€‚
3. å¼€å§‹è¾“å…¥æ—¶ä¼šè‡ªåŠ¨æ•è·å½“å‰æ—¶é—´æˆ³ã€‚

### æ—¶é—´æ¨¡å¼

- **å®é™…æ—¶é—´æ¨¡å¼**ï¼ˆé»˜è®¤ï¼‰â€”â€” æ ‡è®°è®°å½•å¼€å§‹è¾“å…¥æ—¶çš„å®é™…æ—¶é’Ÿæ—¶é—´ã€‚
- **ç›´æ’­æ—¶é—´æ¨¡å¼** â€”â€” æ ‡è®°è®°å½•ä»èµ·å§‹æ—¶é—´ç®—èµ·çš„ç»è¿‡æ—¶é—´ã€‚
- ç‚¹å‡»åº•éƒ¨ â± æŒ‰é’®ï¼ˆæˆ–æŒ‰ <kbd>Ctrl+T</kbd> / <kbd>âŒ˜T</kbd>ï¼‰åˆ‡æ¢æ¨¡å¼ã€‚

### æ™ºèƒ½æ—¶é—´è¾“å…¥

åœ¨æ¶ˆæ¯å¼€å¤´è¾“å…¥æ—¶é—´ï¼Œå°†è‡ªåŠ¨è¯†åˆ«ä¸ºç›´æ’­æ—¶é—´ï¼ˆLive Timeï¼‰ï¼š

| æ ¼å¼ | ç¤ºä¾‹ |
|---|---|
| `hh:mm:ss` | `1:23:45 æŸä¸ªäº‹ä»¶` |
| `hh.mm.ss` | `1.23.45 æŸä¸ªäº‹ä»¶` |
| `hhï¼šmmï¼šss` | `1ï¼š23ï¼š45 æŸä¸ªäº‹ä»¶`ï¼ˆå…¨è§’å†’å·ï¼‰ |
| `hh-mm-ss` | `1-23-45 æŸä¸ªäº‹ä»¶` |

æ—¶é—´ä¼šè¢«è‡ªåŠ¨æå–å¹¶åº”ç”¨ï¼Œå‰©ä½™æ–‡æœ¬ä¿ç•™ä¸ºæ¶ˆæ¯å†…å®¹ã€‚

### å¿«æ·é”®

| æ“ä½œ | Windows / Linux | macOS |
|---|---|---|
| æ·»åŠ æ ‡è®° | <kbd>Enter</kbd> | <kbd>Enter</kbd> |
| é”å®šè¾“å…¥æ—¶é—´ | <kbd>Escape</kbd> | <kbd>Escape</kbd> |
| è§£é”è¾“å…¥æ—¶é—´ | <kbd>Shift+Escape</kbd> | <kbd>Shift+Escape</kbd> |
| åˆ‡æ¢æ—¶é—´æ¨¡å¼ | <kbd>Ctrl+T</kbd> | <kbd>âŒ˜T</kbd> |
| æ–°å»º | <kbd>Ctrl+N</kbd> | <kbd>âŒ˜N</kbd> |
| æ‰“å¼€ | <kbd>Ctrl+O</kbd> | <kbd>âŒ˜O</kbd> |
| ä¿å­˜ | <kbd>Ctrl+S</kbd> | <kbd>âŒ˜S</kbd> |
| å¦å­˜ä¸º | <kbd>Shift+Ctrl+S</kbd> | <kbd>â‡§âŒ˜S</kbd> |
| æ’¤é”€ | <kbd>Ctrl+Z</kbd> | <kbd>âŒ˜Z</kbd> |
| é‡åš | <kbd>Ctrl+Y</kbd> | <kbd>âŒ˜Y</kbd> |
| è®¾ç½® | <kbd>Shift+Ctrl+P</kbd> | <kbd>â‡§âŒ˜P</kbd> |
| å¯¼å‡ºä¸ºæ–‡æœ¬ | <kbd>Shift+Ctrl+T</kbd> | <kbd>â‡§âŒ˜T</kbd> |
| å¯¼å‡ºä¸º Excel | <kbd>Shift+Ctrl+E</kbd> | <kbd>â‡§âŒ˜E</kbd> |
| é€‰æ‹©é¢œè‰² 1â€“7 | <kbd>Ctrl+1</kbd> ~ <kbd>Ctrl+7</kbd> | <kbd>âŒ˜1</kbd> ~ <kbd>âŒ˜7</kbd> |
| åˆ é™¤æ ‡è®° | <kbd>Delete</kbd>ï¼ˆåœ¨è¡¨æ ¼ä¸­ï¼‰ | <kbd>Delete</kbd>ï¼ˆåœ¨è¡¨æ ¼ä¸­ï¼‰ |

### è®¾ç½®

é€šè¿‡ **File â†’ Settings** æˆ– <kbd>Shift+Ctrl+P</kbd> / <kbd>â‡§âŒ˜P</kbd> è®¿é—®ï¼š

- **å¯ç”¨è‡ªåŠ¨ä¿å­˜** â€”â€” ä¿®æ”¹æ—¶è‡ªåŠ¨ä¿å­˜ï¼ˆé»˜è®¤å¼€å¯ï¼‰ã€‚
- **æ˜¾ç¤ºæ—¥æœŸæ—¶é—´åˆ—** â€”â€” åœ¨æ ‡è®°è¡¨æ ¼ä¸­æ˜¾ç¤º/éšè—ç»å¯¹æ—¥æœŸæ—¶é—´åˆ—ï¼ˆé»˜è®¤å¼€å¯ï¼‰ã€‚

### æ–‡ä»¶æ ¼å¼

æ ‡è®°ä»¥ YAMLï¼ˆ`.yaml`ï¼‰æ ¼å¼ä¿å­˜ï¼Œä¾¿äºé˜…è¯»å’Œç‰ˆæœ¬ç®¡ç†ã€‚

---

## å¼€å‘è€…è¯´æ˜

### å‰ç½®è¦æ±‚

- [.NET 9 SDK](https://dotnet.microsoft.com/download/dotnet/9.0)
- ä»»ä½•æ”¯æŒ .NET å¼€å‘çš„ IDEï¼ˆRiderã€Visual Studioã€VS Codeï¼‰

### æŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯ |
|---|---|
| UI æ¡†æ¶ | [Avalonia UI](https://avaloniaui.net/) 11.3 |
| æ¶æ„æ¨¡å¼ | MVVMï¼Œä½¿ç”¨ [CommunityToolkit.Mvvm](https://github.com/CommunityToolkit/dotnet) |
| æ•°æ®åºåˆ—åŒ– | [YamlDotNet](https://github.com/aaubry/YamlDotNet) |
| Excel å¯¼å‡º | [NPOI](https://github.com/nissl-lab/npoi) |
| å›¾æ ‡ | [FluentIcons.Avalonia](https://github.com/nicokimmel/FluentIcons.Avalonia) |
| å¯¹è¯æ¡† | [MessageBox.Avalonia](https://github.com/AvaloniaCommunity/MessageBox.Avalonia) |

### é¡¹ç›®ç»“æ„

```
Yohuke.LiveMarker/
â”œâ”€â”€ Actions/              # æ’¤é”€/é‡åšæ“ä½œç³»ç»Ÿ
â”‚   â”œâ”€â”€ ActionManager.cs
â”‚   â”œâ”€â”€ IUndoableAction.cs
â”‚   â”œâ”€â”€ AddMarkerAction.cs
â”‚   â”œâ”€â”€ DeleteMarkerAction.cs
â”‚   â””â”€â”€ EditMarkerAction.cs
â”œâ”€â”€ Assets/               # åº”ç”¨å›¾æ ‡
â”œâ”€â”€ Converters/           # Avalonia å€¼è½¬æ¢å™¨
â”‚   â”œâ”€â”€ LiveTimeConverter.cs
â”‚   â”œâ”€â”€ LiveTimeMultiConverter.cs
â”‚   â”œâ”€â”€ MarkerColorToBrushConverter.cs
â”‚   â””â”€â”€ MarkerColorToDefinitionConverter.cs
â”œâ”€â”€ Exporters/            # å¯¼å‡ºåŠŸèƒ½
â”‚   â”œâ”€â”€ IMarkerExporter.cs
â”‚   â”œâ”€â”€ PlainTextExporter.cs
â”‚   â””â”€â”€ ExcelExporter.cs
â”œâ”€â”€ Models/               # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ LiveMarkerData.cs
â”‚   â”œâ”€â”€ MarkerData.cs
â”‚   â”œâ”€â”€ MarkColor.cs
â”‚   â””â”€â”€ MarkerColorDefinition.cs
â”œâ”€â”€ Settings/             # åº”ç”¨è®¾ç½®ä¸æœ¬åœ°å­˜å‚¨
â”‚   â”œâ”€â”€ AppSettings.cs
â”‚   â”œâ”€â”€ LocalCache.cs
â”‚   â””â”€â”€ LocalPreference.cs
â”œâ”€â”€ Utilities/            # å·¥å…·ç±»
â”‚   â”œâ”€â”€ MarkerColorUtilities.cs
â”‚   â”œâ”€â”€ PathUtilities.cs
â”‚   â”œâ”€â”€ StoragePickerUtilities.cs
â”‚   â””â”€â”€ TimeUtilities.cs
â”œâ”€â”€ ViewModels/           # MVVM ViewModel å±‚
â”‚   â”œâ”€â”€ ViewModelBase.cs
â”‚   â”œâ”€â”€ MainWindowViewModel.cs
â”‚   â”œâ”€â”€ MainWindowViewModel.Commands.cs
â”‚   â””â”€â”€ SettingsWindowViewModel.cs
â”œâ”€â”€ Views/                # Avalonia UI è§†å›¾å±‚
â”‚   â”œâ”€â”€ MainWindow.axaml / .axaml.cs
â”‚   â”œâ”€â”€ SettingsWindow.axaml / .axaml.cs
â”‚   â””â”€â”€ ColorChoiceCombo.axaml / .axaml.cs
â”œâ”€â”€ App.axaml / .axaml.cs
â”œâ”€â”€ AppRuntime.cs         # å…¨å±€è¿è¡Œæ—¶çŠ¶æ€
â””â”€â”€ Program.cs            # ç¨‹åºå…¥å£
```

### æ„å»ºä¸è¿è¡Œ

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/raphaelstuart/Yohuke.LiveMarker.git
cd yohuke.livemarker

# è¿˜åŸä¾èµ–å¹¶è¿è¡Œ
dotnet run --project Yohuke.LiveMarker
```

### å‘å¸ƒ

æä¾›äº† PowerShell è„šæœ¬ï¼Œå¯ä¸€é”®æ„å»ºæ‰€æœ‰å¹³å°çš„ç‹¬ç«‹å•æ–‡ä»¶å¯æ‰§è¡Œç¨‹åºï¼š

```powershell
# éœ€è¦ PowerShell
./publish.ps1
```

å°†å‘å¸ƒåˆ° `./publish/<å¹³å°>/`ï¼Œæ”¯æŒï¼š
- `win-x64`
- `win-arm64`
- `linux-x64`
- `osx-arm64`

ä½¿ç”¨ `--self-contained true -p:PublishSingleFile=true` æ„å»ºï¼Œç›®æ ‡æœºå™¨æ— éœ€å®‰è£… .NET è¿è¡Œæ—¶ã€‚

### æ¶æ„è¯´æ˜

- **MVVM æ¨¡å¼** â€”â€” è§†å›¾é€šè¿‡ç¼–è¯‘ç»‘å®šï¼ˆ`x:DataType`ï¼‰ç»‘å®šåˆ° ViewModelã€‚`ViewModelBase<T>` æä¾›å¯¹å®¿ä¸»çª—å£çš„ç±»å‹åŒ–å¼•ç”¨ã€‚
- **æ’¤é”€/é‡åš** â€”â€” åŸºäºå‘½ä»¤æ¨¡å¼å®ç°ã€‚`ActionManager` ç»´æŠ¤ `IUndoableAction` å¯¹è±¡çš„æ’¤é”€/é‡åšæ ˆã€‚
- **åˆ†éƒ¨ç±»** â€”â€” `MainWindowViewModel` æ‹†åˆ†ä¸º `.cs`ï¼ˆçŠ¶æ€ä¸é€»è¾‘ï¼‰å’Œ `.Commands.cs`ï¼ˆå‘½ä»¤å®šä¹‰ï¼‰ï¼Œæå‡å¯è¯»æ€§ã€‚
- **æ™ºèƒ½æ—¶é—´è§£æ** â€”â€” `TimeUtilities.TryParseFlexibleTime()` ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ£€æµ‹å¹¶æå–ç”¨æˆ·è¾“å…¥ä¸­çš„æ—¶é—´æ ¼å¼ï¼Œæ”¯æŒå¤šç§åˆ†éš”ç¬¦ï¼ˆ`:` `.` `ï¼š` `-`ï¼‰ã€‚
- **è®¾ç½®æŒä¹…åŒ–** â€”â€” é€šè¿‡ `AppSettings` ä»¥ YAML æ ¼å¼å­˜å‚¨ï¼Œå¯åŠ¨æ—¶ç”± `AppRuntime.Init()` åŠ è½½ã€‚

